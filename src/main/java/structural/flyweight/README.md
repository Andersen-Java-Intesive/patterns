Shape (Фигура): Абстрактный класс или интерфейс, определяющий общий интерфейс для конкретных легковесных объектов. В примере представлен интерфейс Shape, который определяет метод draw.

Circle (Круг): Конкретная реализация интерфейса Shape. Класс Circle хранит внутреннее состояние (intrinsic state), такое как координаты и радиус круга, и внешнее состояние (extrinsic state), такое как цвет. Метод draw использует это состояние для выполнения операции.

ShapeFactory (Фабрика фигур): Фабрика, которая создает и управляет легковесными объектами Circle. Использует механизм кэширования для повторного использования уже созданных объектов. В методе getCircle происходит проверка наличия объекта в кэше, если объект отсутствует, он создается и добавляется в кэш.

Паттерн Flyweight позволяет эффективно использовать разделяемые (shared) объекты для экономии памяти и улучшения производительности. Каждый круг (Circle) представляет собой легковесный объект, использующийся для рисования на экране, при этом цвет является внешним состоянием, а координаты и радиус — внутренним.